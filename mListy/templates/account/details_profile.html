{% extends 'base/base.html' %}
{% block page_title %} {{ profile.slug }} {% endblock %}
{% block nav_items %}
    {% include 'nav&footer/nav_items.html' %}
{% endblock %}
{% block page_content %}
    <div class="container">
        <div class="tab-content">
            <div class="tab-pane fade show active" id="tab-1" role="tabpanel" aria-labelledby="1-tab">
                <div class="row row--grid">
                    <div class="col-12 col-sm-6 col-xl-3">
                        <div class="stats">
                            <span>Username</span>
                            <p>{{ profile.slug }}</p>
                            <i class="fa-solid fa-user"></i>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-xl-3">
                        <div class="stats">
                            <span>Total Lists</span>
                            <p><a href="#">{{ user_lists.count }}</a></p>
                            <i class="fa-solid fa-list"></i>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-xl-3">
                        <div class="stats">
                            <span>Total Movies</span>
                            <p><a href="#">{{ total_movies }}</a></p>
                            <i class="fa-solid fa-film"></i>
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-xl-3">
                        <div class="stats">
                            <span>Total Average Grade</span>
                            <p><a href="#">{{ total_average_grade|floatformat:1 }}</a></p>
                            <i class="fa-solid fa-star"></i>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="stats" style="display: flex; flex-direction: row; justify-content: space-evenly">
                            <p>Days: {{ total_time_days|floatformat:0 }}</p>
                            <p>Hours: {{ total_time_hours|floatformat:0 }}</p>
                            <p>Minutes: {{ total_time_minutes|floatformat:0 }}</p>
                            <i class="fa-solid fa-clock"></i>
                        </div>
                    </div>
                    <div class="col-12 col-xl-6">
                        <div class="dashbox">
                            <div class="dashbox__title">
                                <h3>Profile Info</h3>
                                <i class="fa-solid fa-hashtag"></i>
                            </div>
                            <div class="dashbox__table-wrap">
                                <table class="main__table main__table--dash">
                                    <thead>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>
                                            <div class="main__table-text"><i class="fa-solid fa-user"></i>First Name:</div>
                                        </td>
                                        <td>
                                            {% if profile.first_name %}
                                                <div class="main__table-text">{{ profile.first_name }}</div>
                                            {% else %}
                                                <div class="main__table-text">N/A</div>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="main__table-text"><i class="fa-solid fa-user"></i>Last Name:</div>
                                        </td>
                                        <td>
                                            {% if profile.last_name %}
                                                <div class="main__table-text">{{ profile.last_name }}</div>
                                            {% else %}
                                                <div class="main__table-text">N/A</div>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="main__table-text "><i class="fa-sharp fa-solid fa-globe "></i>Website:
                                            </div>
                                        </td>
                                        <td>
                                            {% if profile.website %}
                                                <div class="main__table-text"><a
                                                        href="{{ profile.website }}">{{ profile.website }}</a></div>
                                            {% else %}
                                                <div class="main__table-text">N/A</div>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="main__table-text"><i class="fa-brands fa-twitter"></i>Twitter:
                                            </div>
                                        </td>
                                        <td>
                                            {% if profile.twitter %}
                                                <div class="main__table-text"><a
                                                        href="{{ profile.twitter }}">{{ profile.twitter }}</a></div>
                                            {% else %}
                                                <div class="main__table-text">N/A</div>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="main__table-text"><i class="fa-brands fa-instagram"></i>Instagram:
                                            </div>
                                        </td>
                                        <td>
                                            {% if profile.instagram %}
                                                <div class="main__table-text"><a
                                                        href="{{ profile.instagram }}">{{ profile.instagram }}</a></div>
                                            {% else %}
                                                <div class="main__table-text">N/A</div>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="main__table-text"><i class="fa-brands fa-facebook"></i>Facebook:
                                            </div>
                                        </td>
                                        <td>
                                            {% if profile.facebook %}
                                                <div class="main__table-text"><a
                                                        href="{{ profile.facebook }}">{{ profile.facebook }}</a></div>
                                            {% else %}
                                                <div class="main__table-text">N/A</div>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                                {% if is_owner %}
                                    <a href="{% url 'edit profile' profile.slug %}">
                                        <button class="sign__btn" type="submit">Edit</button>
                                    </a>
                                    <a href="{% url 'change password' %}">
                                        <button class="sign__btn" type="submit">Change password</button>
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-xl-6">
                        <div class="dashbox">
                            <div class="dashbox__title">
                                <h3>Last Added</h3>
                                <i class="fa-solid fa-calendar"></i>
                            </div>
                            <div class="dashbox__table-wrap">
                                <table class="main__table main__table--dash">
                                    <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Grade</th>
                                        <th>List</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for m in last_added %}
                                        <tr>
                                            <td>
                                                <div class="main__table-text"><a
                                                        href="{% url 'details movie' m.slug %}">{{ m.movie.name|truncatewords:10 }}</a>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="main__table-text"><i class="fa-solid fa-star"></i>{{ m.grade }}</div>
                                            </td>
                                            <td>
                                                <div class="main__table-text main__table-text--rate"><a
                                                        href="{% url 'details list' m.list.slug %}">{{ m.list.title }}</a>
                                                </div>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block footer %}
    {% include 'nav&footer/footer.html' %}
{% endblock %}